<!DOCTYPE html>
<html>
  <head>
    <title><%= title %></title>
    <link rel="stylesheet" href="/stylesheets/style.css" />
  </head>
  <body>
    <h1>mongodb增删改查的演示</h1>
    <div>用户名：<input id="username" /></div>
    <div>密 码：<input type="password" id="password" /></div>
    <div>年 龄：<input type="number" id="age" /></div>
    <div><button id="register">注册</button></div>
    <hr>
    <div>
      <button id="update">更新</button>
      <button id="delete">删除</button>
    </div>

    <script>
      var username = document.querySelector("#username");
      var password = document.querySelector("#password");
      var age = document.querySelector("#age");
      var register = document.querySelector("#register");
      var update = document.querySelector("#update");
      var handleDelete = document.querySelector("#delete");

      // 注册
      register.onclick = () => {
        console.log(username.value, password.value, age.value);
        fetch("/api/user/add", {
          method: "POST",
          body: JSON.stringify({
            username: username.value,
            password: password.value,
            age: age.value,
          }),
          headers: {
            "Content-Type": "Application/json",
          },
        })
          .then((res) => res.json())
          .then((res) => {
            console.log(res);
          });
      };

      // 更新
      update.onclick=()=>{
        fetch("/api/user/update/6371e8b87fd38d83cf88f98f", {
          method: "POST",
          body: JSON.stringify({
            username: username.value,
            password: password.value,
            age: age.value,
          }),
          headers: {
            "Content-Type": "Application/json",
          },
        })
          .then((res) => res.json())
          .then((res) => {
            console.log(res);
          });
      }

      // 删除
      handleDelete.onclick = ()=>{

      }
    </script>
  </body>
</html>
